define("unilabeltype_imageboard/imageboarddraganddrop",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=()=>{var selectedImage=[];selectedImage.number=null,selectedImage.number=null,selectedImage.src="",selectedImage.itemToMove=null,selectedImage.eventlayerX=0,selectedImage.eventlayerY=0,selectedImage.width=null,selectedImage.height=null,selectedImage.titlecorrector=0;var canvas=null;function dragStart(event){if(event.explicitOriginalTarget&&event.explicitOriginalTarget.classList?(console.log("dragStart image ausgewählt"),selectedImage.titlecorrector=0):(console.log("dragStart title ausgewählt"),selectedImage.titlecorrector=50),event&&event.target&&event.target.classList.contains("unilabel-imageboard-element-draggable")){let number=event.target.getAttribute("id").split("unilabel-imageboard-element-")[1],imagedata=function(number){let imageids={title:"id_unilabeltype_imageboard_title_"+number,titlecolor:"id_unilabeltype_imageboard_titlecolor_colourpicker",titlebackgroundcolor:"id_unilabeltype_imageboard_titlebackgroundcolor_colourpicker",fontsize:"id_unilabeltype_imageboard_fontsize",xposition:"id_unilabeltype_imageboard_xposition_"+number,yposition:"id_unilabeltype_imageboard_yposition_"+number,targetwidth:"id_unilabeltype_imageboard_targetwidth_"+number,targetheight:"id_unilabeltype_imageboard_targetheight_"+number,src:"",border:"id_unilabeltype_imageboard_border_"+number},imagedata=[];imagedata.title=document.getElementById(imageids.title).value,imagedata.titlecolor=document.getElementById(imageids.titlecolor).value,imagedata.titlebackgroundcolor=document.getElementById(imageids.titlebackgroundcolor).value,imagedata.fontsize=document.getElementById(imageids.fontsize).value,imagedata.xposition=document.getElementById(imageids.xposition).value,imagedata.yposition=document.getElementById(imageids.yposition).value,imagedata.targetwidth=document.getElementById(imageids.targetwidth).value,imagedata.targetheight=document.getElementById(imageids.targetheight).value;const imagetag=document.getElementById("id_unilabeltype_imageboard_image_"+number+"_fieldset").getElementsByTagName("img");let src="";imagetag.length&&0!=imagetag.length&&(src=imagetag[0].src,src=src.split("?")[0]);return imagedata.src=src,imagedata.border=document.getElementById(imageids.border).value,imagedata}(number);selectedImage.number=number,selectedImage.title=imagedata.title,selectedImage.fontsize=imagedata.fontsize,selectedImage.width=imagedata.targetwidth,selectedImage.height=imagedata.targetheight,selectedImage.itemToMove=document.getElementById("unilabel-imageboard-element-"+selectedImage.number),selectedImage.eventlayerX=event.layerX,selectedImage.eventlayerY=event.layerY}}function dragEnd(event){if(null!==selectedImage.number){var xposition=function(event){console.log("------calculateXposition"),console.log("event",event);var canvasboundings=canvas.getBoundingClientRect();console.log("canvasboundings",canvasboundings);var xposition=event.clientX-canvasboundings.left-selectedImage.eventlayerX-1;xposition<0&&(xposition=0);xposition>=950-selectedImage.width&&(xposition=950-selectedImage.width);return Math.round(xposition)}(event);console.log("xposition",xposition);var yposition=function(event){var canvasboundings=canvas.getBoundingClientRect(),yposition=event.clientY-canvasboundings.top-selectedImage.eventlayerY-1;yposition<0&&(yposition=0);yposition>=400-selectedImage.height&&(yposition=400-selectedImage.height);return Math.round(yposition)}(event);console.log("yposition",yposition),selectedImage.itemToMove.style.left=xposition+"px",selectedImage.itemToMove.style.top=yposition+selectedImage.titlecorrector+"px";const inputPositionX=document.getElementById("id_unilabeltype_imageboard_xposition_"+selectedImage.number),inputPositionY=document.getElementById("id_unilabeltype_imageboard_yposition_"+selectedImage.number);inputPositionX.value=xposition,inputPositionY.value=yposition,selectedImage.number=null,selectedImage.titlecorrector=0}}setTimeout((function(){(canvas=document.getElementById("unilabel-imageboard-background-canvas")).addEventListener("dragstart",dragStart,!1),canvas.addEventListener("dragend",dragEnd,!1)}),1e3)}}));

//# sourceMappingURL=imageboarddraganddrop.min.js.map